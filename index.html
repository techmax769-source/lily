<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>For My Darling ‚ù§Ô∏è</title>
<style>
:root{
  --bg:#0b0710;
  --pink:#ff6fa3;
  --gold:#ffd166;
  --blue-text:#6fb3ff;
}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:
    radial-gradient(600px 260px at 20% 10%,rgba(255,111,163,0.05),transparent 40%),
    radial-gradient(700px 240px at 90% 80%,rgba(255,209,102,0.04),transparent 60%),
    var(--bg);
  color:#fff;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  align-items:stretch;
  justify-content:stretch;
  padding:16px;
}

/* üíô Top typing title */
.top-typing{
  text-align:center;
  font-size:20px;
  font-weight:600;
  color:var(--blue-text);
  text-shadow:0 0 10px rgba(111,179,255,0.8),0 0 20px rgba(111,179,255,0.4);
  min-height:32px;
  margin-bottom:8px;
  letter-spacing:1px;
}
.top-cursor{
  display:inline-block;
  width:2px;
  height:1em;
  background:var(--gold);
  margin-left:2px;
  animation:blink 1s steps(2,start) infinite;
}
@keyframes blink{50%{opacity:.2}}

/* glowing photo */
.photo-frame{
  height:32%;
  border-radius:18px;
  overflow:hidden;
  position:relative;
  border:2px solid transparent;
  background:linear-gradient(90deg,var(--pink),var(--gold),var(--pink)) border-box;
  animation:glowBorder 5s linear infinite;
}
@keyframes glowBorder{
  0%{box-shadow:0 0 8px var(--pink);}
  50%{box-shadow:0 0 18px var(--gold);}
  100%{box-shadow:0 0 8px var(--pink);}
}
.photo{width:100%;height:100%;object-fit:cover;transition:transform .6s ease;}
.photo:hover{transform:scale(1.02);}
.message{
  flex:1;
  background:rgba(255,255,255,0.03);
  border-radius:16px;
  margin-top:10px;
  padding:16px;
  overflow:auto;
  position:relative;
  animation:glowBorderMsg 6s linear infinite;
}
@keyframes glowBorderMsg{
  0%{box-shadow:0 0 10px var(--pink);}
  50%{box-shadow:0 0 18px var(--gold);}
  100%{box-shadow:0 0 10px var(--pink);}
}
.message h1{color:var(--pink);font-size:18px;margin-bottom:8px;}
.typing{color:var(--blue-text);font-size:16px;line-height:1.6;white-space:pre-wrap;}
.cursor{
  display:inline-block;
  width:2px;
  height:1.2em;
  background:linear-gradient(180deg,var(--pink),var(--gold));
  animation:blink 1s steps(2,start) infinite;
}

/* music button */
.play-floating{
  position:absolute;
  bottom:10px;
  right:12px;
  width:52px;
  height:52px;
  border-radius:50%;
  background:rgba(255,255,255,0.07);
  border:1px solid rgba(255,255,255,0.15);
  backdrop-filter:blur(8px);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 4px 12px rgba(0,0,0,0.4);
  cursor:pointer;
  transition:all .25s ease;
  z-index:30;
}
.play-floating:hover{transform:scale(1.05);}
.play-floating.playing{animation:pulse 2s infinite;}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,255,255,0.1);}
  70%{box-shadow:0 0 0 10px transparent;}
  100%{box-shadow:0 0 0 0 transparent;}
}
.icon{width:26px;height:26px;fill:#fff;opacity:.85;}

/* signature */
.signature{
  position:absolute;
  bottom:70px;
  left:50%;
  transform:translateX(-50%);
  font-family:'Great Vibes',cursive;
  font-size:22px;
  color:var(--gold);
  letter-spacing:1px;
  opacity:0;
  animation:fadeInGlow 3s ease 3s forwards, shimmer 6s ease-in-out infinite;
  text-shadow:0 0 6px rgba(255,209,102,0.4);
}
@keyframes fadeInGlow{
  0%{opacity:0;transform:translateX(-50%) translateY(10px);}
  50%{opacity:1;}
  100%{opacity:1;transform:translateX(-50%) translateY(0);}
}
@keyframes shimmer{
  0%{text-shadow:0 0 6px rgba(255,209,102,0.3);}
  50%{text-shadow:0 0 12px rgba(255,209,102,0.6);}
  100%{text-shadow:0 0 6px rgba(255,209,102,0.3);}
}
@media(max-width:420px){
  .message h1{font-size:17px;}
  .typing{font-size:15px;}
}
</style>
</head>
<body>
  <div class="top-typing" id="topTyping"></div>

  <div class="photo-frame"><img src="photo.jpg" alt="photo" class="photo"></div>

  <div class="message">
    <h1>For my darling,</h1>
    <div id="typing" class="typing"></div>
  </div>

  <div class="signature">Lilian Gatwiri üí´</div>

  <div class="play-floating" id="musicBtn">
    <svg class="icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
      <path id="playIcon" d="M24 18 L48 32 L24 46 Z"></path>
      <g id="pauseIcon" style="display:none">
        <rect x="22" y="18" width="6" height="28"></rect>
        <rect x="36" y="18" width="6" height="28"></rect>
      </g>
    </svg>
  </div>

  <audio id="typingAudio" src="typing-sound.mp3" preload="auto"></audio>
  <audio id="loveAudio" src="love-song.mp3" preload="metadata"></audio>

<script>
// üíô Continuous header typing animation
const topText = "To ma gal üíï";
const topContainer = document.getElementById("topTyping");
const topCursor = document.createElement("span");
topCursor.className = "top-cursor";
topContainer.appendChild(topCursor);

let i = 0;
let typingForward = true;

function loopHeader() {
  if (typingForward) {
    if (i < topText.length) {
      topContainer.textContent = topText.substring(0, i + 1);
      topContainer.appendChild(topCursor);
      i++;
      setTimeout(loopHeader, 150);
    } else {
      typingForward = false;
      setTimeout(loopHeader, 1000);
    }
  } else {
    if (i > 0) {
      topContainer.textContent = topText.substring(0, i - 1);
      topContainer.appendChild(topCursor);
      i--;
      setTimeout(loopHeader, 100);
    } else {
      typingForward = true;
      setTimeout(loopHeader, 1000);
    }
  }
}
loopHeader();

// üíô Main message typing
const message=`My love is so true and pure; my love is only for you. I wish to take you in my arms, and never let you go. I wish to be with you till the end of time. I wish that sleeping in your arms under the moonlight, we look at the stars. The passion, the love, the feelings are pure. I really wish that we stay this way forever. I wish that we go to the beach by the sea. Holding your hands, I wanna just feel you and your love. The feelings are true, it's only for you. I wish the time stops by, and the moment also stops. I don't wanna let you go, coz you know that I love you so much. And, I wish you understand that I can't live without you now. Seal my lips with a tender kiss as we exchange the wedding vow. I love you so much my sweetheart, we shall now never stay apart.`;

const container=document.getElementById('typing');
const letterCursor=document.createElement('span');
letterCursor.className='cursor';
container.appendChild(letterCursor);

const chars=Array.from(message);
const totalDuration=60000;
const avg=totalDuration/chars.length;
const typingAudio=document.getElementById('typingAudio');
typingAudio.volume=0.07;

let idx=0;
function typeNext(){
  if(idx>=chars.length){letterCursor.style.opacity='0';return;}
  const ch=chars[idx++];
  if(ch==='\\n') container.insertBefore(document.createElement('br'),letterCursor);
  else container.insertBefore(document.createTextNode(ch),letterCursor);
  if(ch.trim().length>0){typingAudio.currentTime=0;typingAudio.play().catch(()=>{});}
  container.parentElement.scrollTop=container.parentElement.scrollHeight;
  setTimeout(typeNext,avg);
}
window.addEventListener('load',()=>setTimeout(typeNext,500));

// ‚ù§Ô∏è Music button controls (manual start)
const musicBtn=document.getElementById('musicBtn');
const loveAudio=document.getElementById('loveAudio');
const playIcon=document.getElementById('playIcon');
const pauseIcon=document.getElementById('pauseIcon');
loveAudio.volume=0.8;

musicBtn.addEventListener('click',()=>{
  if(loveAudio.paused){
    loveAudio.play().catch((e)=>console.log("Tap required:", e));
  } else {
    loveAudio.pause();
  }
});

loveAudio.addEventListener('play',()=>{
  musicBtn.classList.add('playing');
  playIcon.style.display='none';
  pauseIcon.style.display='block';
});

loveAudio.addEventListener('pause',()=>{
  musicBtn.classList.remove('playing');
  playIcon.style.display='block';
  pauseIcon.style.display='none';
});

// üîÅ Soft crossfade loop
loveAudio.addEventListener('timeupdate',()=>{
  if(loveAudio.duration && loveAudio.currentTime >= loveAudio.duration - 1){
    let startVol = loveAudio.volume;
    let step = startVol / 20;
    let fade = setInterval(()=>{
      if(loveAudio.volume > step){
        loveAudio.volume -= step;
      } else {
        clearInterval(fade);
        loveAudio.currentTime = 0;
        loveAudio.play();
        fadeIn();
      }
    },50);
  }
});
function fadeIn(){
  loveAudio.volume = 0;
  let step = 0.04;
  let fade = setInterval(()=>{
    if(loveAudio.volume < 0.8){loveAudio.volume += step;}
    else{clearInterval(fade);}
  },50);
}
</script>
</body>
</html>
